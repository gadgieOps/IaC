---
###
# Network
secure_zone: "192.168.6.1/32" # Who can access the API server
setup_ufw: true
pod_cidr: "10.42.0.0/16"
svc_cidr: "10.43.0.0/16"
domain_name: "gadgieops.yem"
cluster_interface: eth1

# Optional services
dns: true
dns_ip: "192.168.6.7"
vault: true
metallb: true
longhorn: true

###
# Kubernetes
k3s_version: v1.32.3+k3s1
token: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  63356630633336393936383265343936646466633863336262383030336663346364333962666630
  3033376438303564666535333338633230356235623335380a393630333935373564646239643732
  66626430373436333431653631366438336331646230363635316563386339303034363230623432
  6666383837366636340a386339333362613838663764633666373633633663616133363962666431
  36376333323461373137626562633737326664653964653030623535373638313863613861363265
  38323539663733626165386665633233343536633266383264616264303537636133393965663131
  66666631383361663163633333353433333635353565343766623836363136333237643534393236
  38316334363232356537333862346466326330353533643163323364306533643265376237323738
  3136
extra_server_args: >-
  --tls-san={{ vip }}
  --node-ip={{ ansible_host }}
  --node-external-ip={{ vip }}
  --advertise-address={{ vip }}
  --advertise-port={{ haproxy_port }}
  --cluster-cidr={{ pod_cidr }}
  --service-cidr={{ svc_cidr }}
  --flannel-iface={{ cluster_interface }}

###
# Ports
kube_api_port: 6443
etcd_client_port: 2379
etcd_peer_port: 2380
kubelet_metrics_port: 10250
flannel_vxlan_port: 8472
vault_ports:
  - name: ui
    port: 32000
  - name: api
    port: 32001
  # - name: active
  #   port: 32002
  # - name: standby
  #   port: 32003
dns_port: 53
metallb_port: 7946
longhorn_port: 30100

###
# Keepalived
vip: 192.168.6.6
api_endpoint: "{{ vip }}"
vrrp_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  35626639333532623761383031633562326531313537373736353233333839306138393063363930
  3961643539623561623466633964313439656431383531320a353865333233626166393963303664
  39626132396665353766633233623033633262626166346365656537663033633933346134616164
  3430303338356632630a313536393766663339613639323366646366323939663034623536666134
  3434

###
# ha-proxy
haproxy_port: 8443
api_port: "{{ haproxy_port }}"
